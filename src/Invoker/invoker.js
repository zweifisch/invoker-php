// Generated by CoffeeScript 1.4.0
(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h=[].slice,p={}.hasOwnProperty;n=function(){function e(){this.__listeners=[]}return e.prototype.dispatch=function(e){var t,n,r,i;return i=function(){var t,r,i,s;i=this.__listeners,s=[];for(t=0,r=i.length;t<r;t++)n=i[t],n!=null&&s.push(typeof n=="function"?n(e):void 0);return s}.call(this),t=function(){var e,t,n;n=[];for(e=0,t=i.length;e<t;e++)r=i[e],r===!0&&n.push(r);return n}().length,t===i.length&&i.length>0},e.prototype.add=function(e,t){var n,r,i,s,o;t==null&&(t=!1);if(!t){o=this.__listeners;for(n=i=0,s=o.length;i<s;n=++i){r=o[n];if(r==null)return this.__listeners[n]=e,n}}return this.__listeners.push(e),this.__listeners.length-1},e.prototype.once=function(e){var t,n=this;return t=this.add(function(r){return e(r),n.remove(t)})},e.prototype.remove=function(){var e,t,n,r,i;t=1<=arguments.length?h.call(arguments,0):[],i=[];for(n=0,r=t.length;n<r;n++)e=t[n],i.push(this.__listeners[e]=void 0);return i},e}(),e=function(){function t(t){this.type=t.type,this.url=t.url,this.callback=t.callback,this.headers=t.headers;if(window.XMLHttpRequest)this.xhr=new XMLHttpRequest;else try{this.xhr=new ActiveXObject("Msxml2.XMLHTTP")}catch(n){this.xhr=new ActiveXObject("Microsoft.XMLHTTP")}e[this.xhr]=!0}var e;return e={},t.prototype.send=function(t,n){var r,i,s,o,u=this;this.payload=t,this.callback=(s=this.callback)!=null?s:n,this.xhr.open(this.type,this.url);if(this.headers){o=this.headers;for(r in o){if(!p.call(o,r))continue;i=o[r],this.xhr.setRequestHeader(r,i)}}return this.callback&&(this.xhr.onreadystatechange=function(){if(u.xhr.readyState===4)return u.callback(u.xhr.status,u.xhr.responseText,u.xhr),delete e[u.xhr]}),this.xhr.send(this.payload)},t.prototype.abort=function(){return this.xhr.abort(),delete e[this.xhr]},t.abortAll=function(){var t,n;for(t in e)n=e[t],typeof t.abort=="function"&&t.abort();return e={}},t}(),t=function(){function t(e,t){var n,r;this.__calls=e,this.__callbacks=t,this.__calls=(n=this.__calls)!=null?n:[],this.__callbacks=(r=this.__callbacks)!=null?r:[]}return t.prototype.send=function(t,n){var r,i=this;return this.__done=t,this.__before=n,r={type:"POST",url:"/",headers:{"Content-type":"application/json; charset=utf-8"},callback:function(e,t){var n,r,s,o,u,a,f,l,c,h,p,d;s=JSON.parse(t===""?"{}":t);if(i.__before!=null&&!i.__before(t,e))return;if(e===200){h=i.__callbacks;for(r=o=0,f=h.length;o<f;r=++o)n=h[r],n!=null&&typeof n.success=="function"&&n.success(s!=null?s[r]:void 0)}else{p=i.__callbacks;for(r=u=0,l=p.length;u<l;r=++u)n=p[r],n!=null&&typeof n.error=="function"&&n.error(s!=null?s[r]:void 0,e)}d=i.__callbacks;for(r=a=0,c=d.length;a<c;r=++a)n=d[r],typeof n=="function"&&n(s!=null?s[r]:void 0,e);return typeof i.__done=="function"?i.__done():void 0}},this.__ajax=new e(r),this.__ajax.send(JSON.stringify(this.__calls)),this},t.prototype.abort=function(){var e;return typeof (e=this.__ajax).abort=="function"?e.abort():void 0},t}(),r=function(){function e(){}return e.id=0,e.getUid=function(){return this.id+=1},e}(),o=new n,s=new n,i=function(e,n,i,u){var a,f,l,c=this;return l=r.getUid(),a=[e,n,i,u],f=o.dispatch([a,l]),f?function(e){return s.dispatch([e,l])}:function(e){var n;return n=new t([a],[e]),n.send()}},f=function(e){var t,n,r,s,o,u,a,f,l,c,p;s=e.name,r=e.methods,o=e.staticMethods,t=function(){function e(){var e;e=1<=arguments.length?h.call(arguments,0):[],this.__construct_args=e}return e}(),t.__name=s;if(r!=null){u=function(e){return t.prototype[e]=function(){var t;return t=1<=arguments.length?h.call(arguments,0):[],i(this.constructor.__name,e,t,this.__construct_args)}};for(f=0,c=r.length;f<c;f++)n=r[f],u(n)}if(o!=null){a=function(e){return t[e]=function(){var t;return t=1<=arguments.length?h.call(arguments,0):[],i(this.__name,e,t)}};for(l=0,p=o.length;l<p;l++)n=o[l],a(n)}return t},l=function(e){var t,n,r,i,s,o,u;u=[];for(i=0,s=e.length;i<s;i++)o=e[i],n=o[0],r=o[1],t=o[2],u.push(f({name:n,staticMethods:r,methods:t}));return u},u=function(e){var n,r,i,u,a,f,l,c,h,p,d,v;return c=r=null,l=function(e){return c=e},n=function(e){return r=e},f=[],p=o.add(function(e){var t,n,r;return t=e[0],n=e[1],r=e[2],f.push([t,n,r]),!0}),d=s.add(function(e){var t,n,r,i,s,o,u,a,l,c,h;i=e[0],s=e[1],u=e[2],h=[];for(o=a=0,l=f.length;a<l;o=++a){c=f[o],t=c[0],n=c[1],r=c[2];if(n===s&&r===u){f[o].push(i);break}h.push(void 0)}return h}),e(l,n),o.remove(p),s.remove(d),a=function(){var e,t,n,r;r=[];for(e=0,t=f.length;e<t;e++)n=f[e],v=n[0],v=n[1],v=n[2],u=n[3],r.push(u);return r}(),f=function(){var e,t,n,r;r=[];for(e=0,t=f.length;e<t;e++)n=f[e],i=n[0],v=n[1],v=n[2],v=n[3],r.push(i);return r}(),h=new t(f,a),h.send(c,function(e,t){return t!==200?(r(e,t),!1):!0})},c=function(e,n){var r,i,s,o,u;return i=e[0],u=e[1],r=e[2],s=e[3],o=new t([[i,u,r,s]],[n]),o.send()},a=a!=null?a:this,a.invoker={Signal:n,getClass:f,getClasses:l,batch:u,invoke:c}}).call(this);